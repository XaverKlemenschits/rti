externalproject_add (
  armadillo-external
  #DEPENDS
  GIT_REPOSITORY https://gitlab.com/conradsnicta/armadillo-code.git
  # hash of version 9.870.x
  GIT_TAG be367e6d33868a5a1c436b1542bac0df64c65684
  CMAKE_ARGS
    -DCMAKE_INSTALL_PREFIX=<INSTALL_DIR>
    -DCMAKE_C_COMPILER=${CMAKE_C_COMPILER}
    -DCMAKE_CXX_COMPILER=${CMAKE_CXX_COMPILER}
    -DCMAKE_CXX_STANDARD=${CMAKE_CXX_STANDARD}
    -DCMAKE_CXX_EXTENSIONS=${CMAKE_CXX_EXTENSIONS}
    -DCMAKE_CXX_STANDARD_REQUIRED=${CMAKE_CXX_STANDARD_REQUIRED}
  CMAKE_CACHE_ARGS
    #-DCMAKE_CXX_FLAGS:STRING=${CMAKE_CXX_FLAGS}
    -DCMAKE_PREFIX_PATH:PATH=${CMAKE_PREFIX_PATH}
  USES_TERMINAL_DOWNLOAD 1
  USES_TERMINAL_UPDATE 1
  GIT_PROGRESS 1
  # UPDATE_COMMAND ""
  # CONFIGURE_COMMAND ""
  # BUILD_COMMAND ""
  # INSTALL_COMMAND ""
  )

externalproject_get_property (
  armadillo-external
  INSTALL_DIR
  )
set (
  ARMADILLO_DIR "${INSTALL_DIR}"
  CACHE PATH "Path to Gmsh installation"
  FORCE
  )
unset(INSTALL_DIR)
